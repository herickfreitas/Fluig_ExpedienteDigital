<list>
  <ProcessDefinition>
    <processDefinitionPK>
      <companyId>1</companyId>
      <processId>expediente_digital</processId>
    </processDefinitionPK>
    <processDescription>Expediente Digital</processDescription>
    <instruction>&#xd;
</instruction>
    <active>true</active>
    <publicProcess>false</publicProcess>
    <volumeId>Default</volumeId>
    <categoryId>Solicitações</categoryId>
    <managerEngineAllocationId>Papel</managerEngineAllocationId>
    <managerEngineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Role&gt;admin&lt;/Role&gt;&lt;/AssignmentController&gt;</managerEngineAllocationConfiguration>
    <snapshotFrequency>0</snapshotFrequency>
    <baseDay>0</baseDay>
    <baseMonth>0</baseMonth>
    <periodId>Default</periodId>
    <uniqueCardVersion>false</uniqueCardVersion>
    <keyWord></keyWord>
    <complementsLevel>1</complementsLevel>
    <notifyRequisitionerComplements>true</notifyRequisitionerComplements>
    <notifyManagerComplements>false</notifyManagerComplements>
    <deadlineTime>0</deadlineTime>
    <warningDeadlineTime>0</warningDeadlineTime>
    <notifyAuthorityComplements>true</notifyAuthorityComplements>
  </ProcessDefinition>
  <ProcessDefinitionVersion>
    <processDefinitionVersionPK>
      <companyId>1</companyId>
      <processId>Expediente Digital</processId>
      <version>8</version>
    </processDefinitionVersionPK>
    <versionDescription></versionDescription>
    <formId>0</formId>
    <editionMode>true</editionMode>
    <updateAttachmentsVersion>false</updateAttachmentsVersion>
    <controlsAttachmentsSecurity>false</controlsAttachmentsSecurity>
    <active>true</active>
    <blockedVersion>false</blockedVersion>
    <counterSign>false</counterSign>
    <openInstances>0</openInstances>
    <bpmnVersion>1</bpmnVersion>
    <processStates/>
    <favorito>false</favorito>
    <inheritFormSecurity>false</inheritFormSecurity>
    <mobileReady>true</mobileReady>
  </ProcessDefinitionVersion>
  <list>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>4</sequence>
      </processStatePK>
      <stateName>Início</stateName>
      <stateDescription>Início</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>true</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>30</positionX>
      <positionY>60</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId>Expediente_CNC_10as19</periodId>
      <stateType>0</stateType>
      <bpmnType>10</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>5</sequence>
      </processStatePK>
      <stateName>Gestor - Complementar e direcionar expediente</stateName>
      <stateDescription>Gestor - Complementar e direcionar expediente</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Campo Formulário</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;FormField&gt;gestor&lt;/FormField&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>280</positionX>
      <positionY>248</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>true</inhibitTransfer>
      <periodId>Expediente_CNC_10as19</periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>9</sequence>
      </processStatePK>
      <stateName>Empregado - Complementar expediente</stateName>
      <stateDescription>Empregado - Complementar expediente</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Campo Formulário</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;FormField&gt;colaborador&lt;/FormField&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>true</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>640</positionX>
      <positionY>80</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>true</inhibitTransfer>
      <periodId>Expediente_CNC_10as19</periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>28</sequence>
      </processStatePK>
      <stateName>Processamento</stateName>
      <stateDescription>Processamento</stateDescription>
      <instruction></instruction>
      <deadlineTime>300</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Executor Atividade</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;BaseActivity&gt;4&lt;/BaseActivity&gt;&lt;Returns&gt;Last&lt;/Returns&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>100</positionX>
      <positionY>10</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>true</inhibitTransfer>
      <periodId>Expediente_CNC_10as19</periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>22</sequence>
      </processStatePK>
      <stateName>Encaminhar expediente</stateName>
      <stateDescription>Encaminhar expediente</stateDescription>
      <joint>false</joint>
      <initialState>false</initialState>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <automatic>true</automatic>
      <positionX>300</positionX>
      <positionY>68</positionY>
      <inhibitTransfer>false</inhibitTransfer>
      <stateType>1</stateType>
      <bpmnType>120</bpmnType>
      <signalId>0</signalId>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>11</sequence>
      </processStatePK>
      <stateName>Finalizar expediente</stateName>
      <stateDescription>Finalizar expediente</stateDescription>
      <instruction>Atividade final do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>0</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>true</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>550</positionX>
      <positionY>280</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>6</stateType>
      <bpmnType>60</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
  </list>
  <list>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <expressionOrder>1</expressionOrder>
        <version>8</version>
        <sequence>22</sequence>
      </conditionProcessStatePK>
      <condition>false</condition>
      <destinationSequenceId>9</destinationSequenceId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;FormField&gt;colaborador&lt;/FormField&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <engineAllocationId>Campo Formulário</engineAllocationId>
      <conditionType>1</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <expressionOrder>2</expressionOrder>
        <version>8</version>
        <sequence>22</sequence>
      </conditionProcessStatePK>
      <condition>false</condition>
      <destinationSequenceId>5</destinationSequenceId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;FormField&gt;gestor&lt;/FormField&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <engineAllocationId>Campo Formulário</engineAllocationId>
      <conditionType>1</conditionType>
    </ConditionProcessState>
  </list>
  <list>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>24</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>22</initialStateSequence>
      <finalStateSequence>9</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>25</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>22</initialStateSequence>
      <finalStateSequence>5</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>26</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>5</initialStateSequence>
      <finalStateSequence>22</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>27</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>5</initialStateSequence>
      <finalStateSequence>11</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>29</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>4</initialStateSequence>
      <finalStateSequence>28</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>30</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>28</initialStateSequence>
      <finalStateSequence>22</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>31</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>28</initialStateSequence>
      <finalStateSequence>22</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>true</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <linkSequence>32</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>9</initialStateSequence>
      <finalStateSequence>22</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
  </list>
  <list/>
  <list>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>beforeStateEntry</eventId>
        <processId>expediente_digital</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>var SeqProcessamento = 28;&#xd;
var SeqColaborador = 9;&#xd;
var SeqGestor = 5;&#xd;
var SeqGateway = 22;&#xd;
var SeqFinalizar = 11;&#xd;
&#xd;
&#xd;
function beforeStateEntry(sequenceId){&#xd;
	&#xd;
	log.info(&quot;beforeStateEntry Expediente Digital - sequenceId:  &quot;+sequenceId);&#xd;
	&#xd;
	//If para sequenciar conforme etapas do processo&#xd;
    if (sequenceId == SeqProcessamento) {&#xd;
    	ProcessamentoWorkflow();&#xd;
    }&#xd;
    else if (sequenceId == SeqGateway || sequenceId == SeqFinalizar) {&#xd;
    	ComplementoHistorico();&#xd;
    }&#xd;
    else if (sequenceId == SeqColaborador) {&#xd;
    	ColaboradorWorkflow();&#xd;
    }&#xd;
    else if (sequenceId == SeqGestor) {&#xd;
    	GestorWorkflow();&#xd;
    }&#xd;
    &#xd;
}&#xd;
&#xd;
&#xd;
&#xd;
//////////////////////////////////////////&#xd;
//FUNCAO PARA FORMATAR DATA E HORA  	//&#xd;
//////////////////////////////////////////&#xd;
&#xd;
function dataAtualFormatada(){&#xd;
var hoje = new Date();&#xd;
var dd = hoje.getDate();&#xd;
var mm = hoje.getMonth()+1;&#xd;
var aaaa = hoje.getFullYear();&#xd;
var horas = hoje.getHours();&#xd;
var minutos = hoje.getMinutes();&#xd;
var segundos = hoje.getSeconds();&#xd;
if(dd&lt;10){dd=&apos;0&apos;+dd}&#xd;
if(mm&lt;10){mm=&apos;0&apos;+mm}&#xd;
if(horas&lt;10){horas=&apos;0&apos;+horas}&#xd;
if(minutos&lt;10){minutos=&apos;0&apos;+minutos}&#xd;
if(segundos&lt;10){segundos=&apos;0&apos;+segundos}&#xd;
return dd +&apos;/&apos;+ mm +&apos;/&apos;+ aaaa +&apos; - &apos;+ horas +&apos;:&apos;+ minutos;&#xd;
}	&#xd;
&#xd;
&#xd;
//////////////////////////////////////////////////////&#xd;
//FUNCAO RETORNA O NOME COMPLETO CONFORME LOGIN 	//&#xd;
//////////////////////////////////////////////////////&#xd;
&#xd;
function nomeCompleto(login){&#xd;
var usuario = login;&#xd;
var datasetRetorno = DatasetFactory.getDataset(&quot;colleague&quot;, null, null, null); // Buscando Gestor de acordo com o colaborador&#xd;
for (var i = 0; i &lt; datasetRetorno.rowsCount; i++) {&#xd;
var usuario_fluig = datasetRetorno.getValue(i, &quot;login&quot;); &#xd;
if (usuario_fluig == usuario){&#xd;
var name_fluig = (datasetRetorno.getValue(i, &quot;colleagueName&quot;)).toUpperCase(); &#xd;
}&#xd;
}&#xd;
return name_fluig;&#xd;
}	&#xd;
&#xd;
&#xd;
&#xd;
&#xd;
function ComplementoHistorico() {&#xd;
	try{&#xd;
		&#xd;
		//////////////////////////////////////////////////////////////////////////&#xd;
        //		MOVIMENTANDO CONTEÚDO DE DESPACHO PARA DESPACHO HISTORICO		//&#xd;
		//////////////////////////////////////////////////////////////////////////	&#xd;
		var userLogado = getValue(&quot;WKUser&quot;);					// Recupera o usuário corrente associado a atividade&#xd;
		var despacho   = hAPI.getCardValue(&quot;despacho&quot;);&#xd;
		&#xd;
		//Capturando função e lotação do usuário&#xd;
		var consulta = DatasetFactory.createConstraint(&quot;CODUSUARIO&quot;, userLogado, userLogado, ConstraintType.MUST);&#xd;
		var constraints = new Array(consulta);&#xd;
		log.info(&quot;==========[ _RM_DADOS_COLABORADORES - constraints ]========== &quot; + constraints);&#xd;
		&#xd;
		// coleta dados do dataset, utlizando filtro&#xd;
		var datasetRetorno = DatasetFactory.getDataset(&quot;_RM_DADOS_COLABORADORES&quot;, null, constraints, null);&#xd;
		log.info(&quot;==========[ _RM_DADOS_COLABORADORES - datasetRetorno ] ========== &quot; + datasetRetorno);	&#xd;
		&#xd;
		var nomeSecao  = datasetRetorno.getValue(0, &quot;NOME_SECAO&quot;);&#xd;
		var nomeFuncao = datasetRetorno.getValue(0, &quot;NOME_FUNCAO&quot;);&#xd;
		&#xd;
		&#xd;
		&#xd;
		if (despacho != &quot;&quot;){&#xd;
			&#xd;
			var nome_Completo 		= nomeCompleto(userLogado);&#xd;
			var quebraLinha			= &quot;\n \n ********************************************************************************************************************************************************************************** \n \n &quot;;&#xd;
			var historicoDespacho 	= hAPI.getCardValue(&quot;historicoDespacho&quot;);&#xd;
			// Formatando&#xd;
			var dataFormatada = dataAtualFormatada(); &#xd;
			var concatenando = &apos;Colaborador(a): &apos;+nome_Completo+&apos; \n Função: &apos;+nomeFuncao+&apos; \n Seção: &apos;+nomeSecao+&apos; \n Data: &apos;+dataFormatada+&apos; \n Despacho: &apos;+despacho;&#xd;
			log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - historicoDespacho - ColaboradorWorkflow - concatenando ]========== &quot;+concatenando);&#xd;
			hAPI.setCardValue(&quot;historicoDespacho&quot;, concatenando + quebraLinha + historicoDespacho);&#xd;
			&#xd;
			// Esvaziando campo despacho&#xd;
			hAPI.setCardValue(&quot;despacho&quot;, &quot;&quot;);&#xd;
		}&#xd;
		&#xd;
	}&#xd;
	catch (e)&#xd;
	{&#xd;
		log.error(e);&#xd;
		throw e;&#xd;
	}&#xd;
}&#xd;
&#xd;
&#xd;
&#xd;
&#xd;
function GestorWorkflow() {&#xd;
	try{&#xd;
		&#xd;
	  	//////////////////////////////////////////////////////////////////&#xd;
	  	//	TRATANDO CAMPOS RELACIONADOS AO GESTOR E GESTOR ANTERIOR  	//&#xd;
	  	//////////////////////////////////////////////////////////////////		&#xd;
		&#xd;
		log.info(&quot;==========[ GestorWorkflow - Expediente Digital - ENTROU ]==========&quot;);&#xd;
		&#xd;
		var gestor 				= hAPI.getCardValue(&quot;gestor&quot;);&#xd;
		var gestorAnterior 		= hAPI.getCardValue(&quot;gestorAnterior&quot;);&#xd;
		&#xd;
		log.info(&quot;==========[ GestorWorkflow - Expediente Digital - gestor ]==========&quot;+gestor);&#xd;
		log.info(&quot;==========[ GestorWorkflow - Expediente Digital - gestorAnterior ]==========&quot;+gestorAnterior);&#xd;
		&#xd;
		//Limpando campo colaborador&#xd;
		hAPI.setCardValue(&quot;colaborador&quot;, &quot;&quot;);&#xd;
		&#xd;
		if (gestor != gestorAnterior) {&#xd;
&#xd;
			hAPI.setCardValue(&quot;gestorAnterior&quot;, gestor);&#xd;
			hAPI.setCardValue(&quot;gestor&quot;, &quot;&quot;);&#xd;
		}&#xd;
&#xd;
		else if (gestor == gestorAnterior) {&#xd;
&#xd;
			hAPI.setCardValue(&quot;gestor&quot;, &quot;&quot;);&#xd;
		}&#xd;
		&#xd;
		&#xd;
	}&#xd;
	catch (e)&#xd;
	{&#xd;
		log.error(e);&#xd;
		throw e;&#xd;
	}&#xd;
	&#xd;
}&#xd;
&#xd;
&#xd;
&#xd;
function ColaboradorWorkflow() {&#xd;
	try{&#xd;
		&#xd;
	  	//////////////////////////////////////////////////////////&#xd;
	  	//	SE VAZIO, PREENCHENDO gertor COM gestorAnterior  	//&#xd;
	  	//////////////////////////////////////////////////////////		&#xd;
		&#xd;
		log.info(&quot;==========[ ColaboradorWorkflow - Expediente Digital - ENTROU ]==========&quot;);&#xd;
		&#xd;
		var gestor 				= hAPI.getCardValue(&quot;gestor&quot;);&#xd;
		var gestorAnterior 		= hAPI.getCardValue(&quot;gestorAnterior&quot;);&#xd;
		&#xd;
		//Limpando campo colaborador&#xd;
		hAPI.setCardValue(&quot;colaborador&quot;, &quot;&quot;);&#xd;
		&#xd;
		//if (gestor == &quot;&quot;) {&#xd;
		//	hAPI.setCardValue(&quot;gestor&quot;, gestorAnterior);&#xd;
		//}&#xd;
		&#xd;
	}&#xd;
	catch (e)&#xd;
	{&#xd;
		log.error(e);&#xd;
		throw e;&#xd;
	}&#xd;
	&#xd;
}&#xd;
&#xd;
&#xd;
&#xd;
function ProcessamentoWorkflow(){&#xd;
	try {&#xd;
		&#xd;
	  	//////////////////////////////////////////////////&#xd;
	  	//			PREENCHENDO CAMPOS DO FORM.    		//&#xd;
	  	//////////////////////////////////////////////////&#xd;
		&#xd;
		log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - ENTROU ]==========&quot;);&#xd;
		&#xd;
		var processo = getValue(&quot;WKNumProces&quot;);     			// Recupera o numero da solicitação&#xd;
		var solicitante = getValue(&quot;WKUser&quot;);					// Recupera o usuário corrente associado a atividade&#xd;
		var today = new Date().toISOString().slice(0,10);		// Capturando e formatando data corrente Ex: &apos;2021-09-15&apos;&#xd;
		var gestorLogado = hAPI.getCardValue(&quot;gestorLogado&quot;);	// true é um gestor logado, false não é um, gestor logado&#xd;
		var nome_Completo = nomeCompleto(solicitante);			// Função retorna o nome completo cadastrado no Fluig&#xd;
		&#xd;
		&#xd;
		log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - today ]========== &quot; + today);&#xd;
		log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - identificadorFluig ]========== &quot; + processo);&#xd;
		log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - solicitante ]========== &quot; + solicitante);&#xd;
		log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - gestorLogado ]========== &quot; + gestorLogado);&#xd;
		hAPI.setCardValue(&quot;dataSolicitacao&quot;, today);&#xd;
		hAPI.setCardValue(&quot;identificadorFluig&quot;, processo);&#xd;
		hAPI.setCardValue(&quot;solicitante&quot;, solicitante);&#xd;
		&#xd;
		&#xd;
		//Capturando função e lotação do usuário&#xd;
		var consulta = DatasetFactory.createConstraint(&quot;CODUSUARIO&quot;, solicitante, solicitante, ConstraintType.MUST);&#xd;
		var constraints = new Array(consulta);&#xd;
		log.info(&quot;==========[ _RM_DADOS_COLABORADORES - constraints ]========== &quot; + constraints);&#xd;
		&#xd;
		// coleta dados do dataset, utlizando filtro&#xd;
		var datasetRetorno = DatasetFactory.getDataset(&quot;_RM_DADOS_COLABORADORES&quot;, null, constraints, null);&#xd;
		log.info(&quot;==========[ _RM_DADOS_COLABORADORES - datasetRetorno ] ========== &quot; + datasetRetorno);	&#xd;
		&#xd;
		var nomeSecao  = datasetRetorno.getValue(0, &quot;NOME_SECAO&quot;);&#xd;
		var nomeFuncao = datasetRetorno.getValue(0, &quot;NOME_FUNCAO&quot;);&#xd;
		&#xd;
		&#xd;
        //////////////////////////////////////////////////////////////////////////&#xd;
        //		MOVIMENTANDO CONTEÚDO DE DESPACHO PARA DESPACHO HISTORICO		//&#xd;
		//////////////////////////////////////////////////////////////////////////		&#xd;
		&#xd;
		var despacho = hAPI.getCardValue(&quot;despacho&quot;);&#xd;
		// Formatando&#xd;
		var dataFormatada = dataAtualFormatada(); &#xd;
		var concatenando = &apos;Solicitante: &apos;+nome_Completo+&apos; \n Função: &apos;+nomeFuncao+&apos; \n Seção: &apos;+nomeSecao+&apos; \n Data: &apos;+dataFormatada+&apos; \n Despacho: &apos;+despacho;&#xd;
		log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - historicoDespacho - concatenando ]========== &quot;+concatenando);&#xd;
		hAPI.setCardValue(&quot;historicoDespacho&quot;, concatenando);&#xd;
		// Esvaziando campo despacho&#xd;
		hAPI.setCardValue(&quot;despacho&quot;, &quot;&quot;);&#xd;
		&#xd;
		/*&#xd;
        //////////////////////////////////////////////////////////&#xd;
        //		QUANDO FOR UM GESTOR QUE INICIOU O PROCESSO		//&#xd;
        //////////////////////////////////////////////////////////&#xd;
		&#xd;
		if (gestorLogado == &quot;true&quot;) {&#xd;
			log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - IF-ENTROU (gestorLogado == true) ]========== &quot;);&#xd;
			hAPI.setCardValue(&quot;gestorAnterior&quot;, solicitante);&#xd;
			}&#xd;
		&#xd;
		&#xd;
        //////////////////////////////////////////////////////////&#xd;
        //	QUANDO FOR UM COLABORADOR QUE INICIOU O PROCESSO	//&#xd;
        //////////////////////////////////////////////////////////		&#xd;
		&#xd;
		else if (gestorLogado == &quot;false&quot;) {&#xd;
			&#xd;
			log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - IF-ENTROU (gestorLogado == false) ]========== &quot;);&#xd;
			var c1 = DatasetFactory.createConstraint(&quot;CODUSUARIO&quot;, solicitante, solicitante, ConstraintType.MUST);&#xd;
			var constraints = new Array(c1);&#xd;
			log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - constraints ]========== &quot;+constraints);&#xd;
			var datasetRetorno = DatasetFactory.getDataset(&quot;_RM_FUNC_FILIAL_CUSTO&quot;, null, constraints, null); // Buscando Gestor de acordo com o colaborador&#xd;
	        &#xd;
			for (var i = 0; i &lt; datasetRetorno.rowsCount; i++) {&#xd;
	        	var codUsuarioChefe = datasetRetorno.getValue(i, &quot;CODUSUARIO_CHEFE&quot;); &#xd;
	        	log.info(&quot;==========[ ProcessamentoWorkflow - Expediente Digital - codUsuarioChefe ]========== &quot;+codUsuarioChefe);&#xd;
	        	hAPI.setCardValue(&quot;gestor&quot;, codUsuarioChefe);&#xd;
				}&#xd;
			&#xd;
			}&#xd;
			*/&#xd;
		}&#xd;
	&#xd;
	catch (e)&#xd;
	{&#xd;
		log.error(e);&#xd;
		throw e;&#xd;
	}&#xd;
&#xd;
&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
  </list>
  <list/>
  <list>
    <SwimLane>
      <color>FFFF80</color>
      <height>409</height>
      <width>791</width>
      <positionX>0</positionX>
      <positionY>0</positionY>
      <stateName>Expediente</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>1</version>
        <sequence>1</sequence>
      </swimLanePK>
    </SwimLane>
  </list>
  <list/>
  <list/>
  <list>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>26</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>157</positionX>
      <positionY>297</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>26</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>157</positionX>
      <positionY>125</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>30</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>153</positionX>
      <positionY>125</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>31</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>330</positionX>
      <positionY>41</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>32</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>693</positionX>
      <positionY>372</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>32</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>160</positionX>
      <positionY>372</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>expediente_digital</processId>
        <version>8</version>
        <linkSequence>32</linkSequence>
        <bendSequence>3</bendSequence>
      </processLinkBendPK>
      <positionX>160</positionX>
      <positionY>126</positionY>
    </ProcessLinkBend>
  </list>
  <list/>
  <list/>
  <list/>
  <list/>
  <list/>
  <list>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>5</stateSequence>
      <appKey>approval</appKey>
      <appField>title</appField>
      <description>@[form:assunto]</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>5</stateSequence>
      <appKey>approval</appKey>
      <appField>description</appField>
      <description>@[form:historicoDespacho]</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>5</stateSequence>
      <appKey>approval</appKey>
      <appField>approve</appField>
      <description>22</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>5</stateSequence>
      <appKey>approval</appKey>
      <appField>reject</appField>
      <description>11</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>9</stateSequence>
      <appKey>approval</appKey>
      <appField>title</appField>
      <description>@[form:assunto]</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>9</stateSequence>
      <appKey>approval</appKey>
      <appField>description</appField>
      <description>@[form:historicoDespacho]</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>9</stateSequence>
      <appKey>approval</appKey>
      <appField>approve</appField>
      <description>22</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>expediente_digital</processId>
      <processVersion>8</processVersion>
      <stateSequence>28</stateSequence>
      <appKey>approval</appKey>
      <appField>approve</appField>
      <description>22</description>
    </ProcessAppConfiguration>
  </list>
  <list/>
  <list>
    <ConditionProcessAutomaticRules>
      <sequence>22</sequence>
      <expressionOrder>1</expressionOrder>
      <ruleOrder>1</ruleOrder>
      <field>gestor</field>
      <value></value>
      <operator>0</operator>
      <valueType>0</valueType>
    </ConditionProcessAutomaticRules>
    <ConditionProcessAutomaticRules>
      <sequence>22</sequence>
      <expressionOrder>2</expressionOrder>
      <ruleOrder>1</ruleOrder>
      <field>colaborador</field>
      <value></value>
      <operator>0</operator>
      <valueType>0</valueType>
    </ConditionProcessAutomaticRules>
  </list>
</list>